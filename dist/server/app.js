!function(e){function t(o){if(n[o])return n[o].exports;var i=n[o]={exports:{},id:o,loaded:!1};return e[o].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){(function(e){"use strict";function t(e){var t=new Date(+e),n=t.getFullYear()+"."+(t.getMonth()+1)+"."+t.getDate()+".  "+(t.getHours()+1)+":"+(t.getMinutes()+1);return n}var o=n(8),i=o(),s=n(6),r=n(10),a=(n(9),n(7)),c=n(2),u=(n(1),n(12)),d=n(3),l=n(5);i.use(l.urlencoded({extended:!1})),i.set("view engine","ejs"),i.set("views","./public"),i.use(a()),i.use("/dist",o.static("./dist/src")),i.use("/common",o.static("./common")),i.use("/common",o.static("common")),i.use("/client",o.static("./dist/client")),i.use("/",o.static("./dist/client")),i.get("/",function(t,n){n.sendFile(u.resolve(e,"../public/index.html"))}),i.get("/add",function(t,n){n.sendFile(u.resolve(e,"../public/index.html"))}),i.get("/detail/*",function(t,n){n.sendFile(u.resolve(e,"../public/index.html"))}),i.get("/api/getlist",function(e,n){var o={};o.id=0,d(o,"find",function(e){var o={};if(e.length){o.code=0;var i=[];e.map(function(e,n){var o={};o.tags=e.tag.split(","),o.title=e.title,o.desc=e.desc,o.id=e.id,o.creat_time=t(e.creat_time),i.push(o)}),o.data=i.reverse()}else o.code=-1,o.msg="无此结果",o.data=e;n.send(o),n.end()})}),i.get("/api/getDetail",function(e,n){d(e.query,"find",function(e){var o={};e.length?(o.code=0,o.data=e[0],o.data.tags=o.data.tag.split(","),o.data.creat_time=t(o.data.creat_time)):(o.code=-1,o.msg="无此结果",o.data=e[0]),n.send(o),n.end()})}),i.post("/api/add",function(e,t){d(e.body,"add",function(e){var n={};n.code=0,t.send(n),t.end()},function(e){var n={};n.code=-1,n.msg="保存失败",t.send(n),t.send()})}),i.get("/getapi",function(e,t){t.send("sdasfasda,hhahha,新的来了,sdasdasfa,asdas")}),i.all("/gitpull",function(e,t){t.send("我不想备案,asdasda,asda1231231"),s.exec("git pull",function(e,t){return e?void console.log(e):void s.exec("pm2 restart dist/server/app.js",function(e,t){e&&console.log(e,"err")})})}),i.post("/upimage",function(e,t,n){var o=new r.Form;o.parse(e,function(e,n,o){e&&console.log("parse error: "+e);var i=o.upload[0].path,s=o.upload[0].originalFilename;c(s,i,function(e){var n=e.url.replace("http","https");t.send(n),t.end()})})}),i.listen(6600,function(e,t){console.log("localhost:6000")})}).call(t,"lib")},function(e,t){e.exports=require("co")},function(e,t,n){"use strict";function o(e,t,n){var o;return i(regeneratorRuntime.mark(function i(){var s;return regeneratorRuntime.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return client.useBucket("huchsite"),i.next=3,client.put(e,t);case 3:s=i.sent,o=s,n(o);case 6:case"end":return i.stop()}},i,this)})).then(function(e){console.log(e,"gogogooogogogooggo")}).catch(function(e){console.log(e)}),console.log(o),o}var i=n(1);n(4);e.exports=o},function(e,t,n){"use strict";var o,i=n(11),s=i.createConnection({host:"localhost",user:"root",password:"hc000000",database:"huchsite"});e.exports=function(e,t,n,r){o||(o=i.createPool({connectionLimit:10,host:"localhost",user:"root",password:"hc000000",database:"huchsite"}));var a="";if("add"==t){a="INSERT INTO `home` SET ?";var c={};c.title=e.title,c.tag=e.tag,c.data=e.text,c.creat_time=+e.time,c.desc=e.desc,c.imgpath=e.imgpath,o.getConnection(function(e,t){t.query(a,c,function(e,o){e&&r(e),n(o),t.release()})})}if("find"==t){var u=e.id;a=0==u?"SELECT * FROM `home`":"SELECT * FROM `home` WHERE id = "+s.escape(u),o.getConnection(function(e,t){t.query(a,function(e,o){e&&n(o),n(o),t.release()})})}}},function(e,t){e.exports=require("ali-oss")},function(e,t){e.exports=require("body-parser")},function(e,t){e.exports=require("child_process")},function(e,t){e.exports=require("compression")},function(e,t){e.exports=require("express")},function(e,t){e.exports=require("formidable")},function(e,t){e.exports=require("multiparty")},function(e,t){e.exports=require("mysql")},function(e,t){e.exports=require("path")}]);